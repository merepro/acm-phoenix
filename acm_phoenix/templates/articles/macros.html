{% macro render_posts(posts, pagination) %}
{{ pagination.info|safe }}
{{ pagination.links|safe }}
<div id="posts" class="accordion span8">
  {% set start_point = ((pagination.page - 1) * pagination.per_page) %}
  {% for post in posts[start_point:start_point + pagination.per_page] %}
  <div class="post accordion-group">
    <div class="accordion-heading postHeader">
      <div class="accordion-toggle" data-parent="#posts">
        <h2><a rel="tooltip" data-placement="top" data-original-title="Go to the post" href="/articles/p/{{ post.slug }}"><i class="span1 icon-external-link"></i></a><span data-toggle="collapse" data-parent="#posts" href="#{{ post.id }}">{{ post.title }}</span>
	  <br>
	  <small>
	    <i class="icon-calendar"></i> {{ post.created | formatted_time }} by <a href="/articles/author/{{ post.author.netid }}/">{{ post.author.name }}</a> in <a href="/articles/cat/{{ post.category.slug }}">{{ post.category.slug | title }}</a>
	    <br>
	    <h6><i class="icon-tags"></i> {% for tag in post.tags %} <a href="/articles/tag/{{ tag.name }}">#{{ tag.name | title }}</a>&nbsp;{% endfor %}</h6>
	  </small>
	</h2>
      </div>
    </div>
    <div id="{{ post.id }}" class="accordion-body collapse">
      <div class="accordion-inner">
        {{ post.gfm_content | markdown }}
      </div>
    </div>
  </div>
  <br />
  {% endfor %}
</div>
{% endmacro %}

{% macro render_search_form(form) %}
    {% from "forms/macros.html" import render_field %}
    <div id="postFilter" class="postHeader span3 sidebar-nav">
      <form method="POST" id="searchForm" action="/articles/" class="form post form-search pull-right">
        <h4>Filter posts</h4>
        {{ form.csrf_token }}
        <div class="control-group">
          {{ render_field(form.query, placeholder="Search for specific posts") }}
          <br clear="all" />
        </div>
        <div class="control-group">
          {{ render_field(form.category) }}
          <br clear="all" />
        </div>
        <div class="control-group">
          {{ render_field(form.author) }}
          <br clear="all" />
        </div>
        <div class="control-group">
          {{ render_field(form.tags) }}
          <br clear="all" />
        </div>
        <div class="control-group">
          {{ render_field(form.order_by) }}
          <br clear="all" />
        </div>
        <br />
        <div class="control-group">
          <button type="submit" class="btn btn-primary">Submit</button>
        </div>
      </form>
    </div>
{% endmacro %}
